<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Новини</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(45deg, #005bbb, #ffcd00);
            background-size: 200% 200%;
            animation: gradient 10s ease infinite;
            color: #333;
        }

        @keyframes gradient {
            0% { background-position: 0% 0%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.5);
            color: #333;
            padding: 10px 20px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 20;
            box-sizing: border-box;
        }

        header h1 {
            margin: 0;
            text-align: center;
            flex-grow: 1;
            font-size: 1.8em;
        }

        .menu {
            display: none;
            flex-direction: column;
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 10;
            padding-top: 20px;
            overflow-y: auto;
        }

        .menu a {
            color: #333;
            padding: 15px 20px;
            text-decoration: none;
            border-bottom: 1px solid #ccc;
            transition: background-color 0.3s;
        }

        .menu a:hover {
            background-color: #f0f0f0;
        }

        .menu-toggle {
            cursor: pointer;
            z-index: 20;
            display: flex;
            flex-direction: column;
        }

        .menu-toggle div {
            width: 30px;
            height: 3px;
            background-color: #333;
            margin: 5px 0;
            transition: 0.4s;
        }

        /* Панель пошуку */
        .search-panel {
            display: none;
            flex-direction: column;
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.9);
            z-index: 30;
            padding: 20px;
            overflow-y: auto;
            transition: transform 0.3s ease;
            transform: translateY(-100%);
        }

        .search-panel.show {
            display: flex;
            transform: translateY(0);
        }

        .search-panel input {
            padding: 15px;
            font-size: 1.2em;
            border-radius: 8px;
            border: 1px solid #ccc;
            width: 100%;
            box-sizing: border-box;
        }

        .search-panel .close-search {
            align-self: flex-end;
            font-size: 1.5em;
            background: none;
            border: none;
            cursor: pointer;
            color: #333;
            margin-bottom: 10px;
        }

        .search-container {
            display: flex;
            align-items: center;
            position: relative;
        }

        .search-container svg {
            width: 30px;
            height: 30px;
            cursor: pointer;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 100px auto;
            padding: 0 15px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 768px) {
            .main-content {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Стиль для карток новин */
        .news-card {
            position: relative;
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .news-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .news-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .news-card:hover img {
            transform: scale(1.05);
        }

        /* Заголовок на зображенні */
        .news-card .title-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 1.6em;
            font-weight: bold;
            transition: background 0.3s ease;
        }

        .news-card:hover .title-overlay {
            background: rgba(0, 0, 0, 0.7);
        }

        /* Стиль для фільтру новин */
        .filter-container {
            margin-bottom: 20px;
            width: 100%;
            max-width: 100%;
        }

        .filter-container select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1em;
            width: 100%;
            max-width: 100%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        footer {
            text-align: center;
            padding: 20px;
            background-color: #333;
            color: white;
            margin-top: 40px;
        }

        /* Модальне вікно на всю сторінку */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal.hide {
            animation: modalClose 0.3s forwards;
        }

        .modal-content {
            background-color: #fff;
            width: 100%;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
            border-radius: 0;
        }

        @keyframes modalClose {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.8);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5em;
            color: #333;
        }

        .close {
            font-size: 24px;
            cursor: pointer;
            border: none;
            background: none;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #ff0000;
        }

        .modal-body {
            margin-top: 15px;
            padding: 0 10px;
        }

        .modal-body img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .modal-body p {
            color: #555;
            line-height: 1.6;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .modal-footer button {
            padding: 10px 20px;
            border: none;
            border-radius: 24px;
            background-color: #005bbb;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .modal-footer button:hover {
            background-color: #003d7a;
        }

        /* Стрілки для навігації */
        .arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: #005bbb;
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            padding: 10px;
            cursor: pointer;
            z-index: 1100;
            transition: background-color 0.3s ease;
        }

        .arrow:hover {
            background-color: rgba(0, 91, 187, 0.8);
            color: white;
        }

        .arrow-left {
            left: 10px;
        }

        .arrow-right {
            right: 10px;
        }

    </style>
</head>
<body>
    <header>
        <div class="menu-toggle" onclick="toggleMenu()" aria-label="Відкрити меню">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <h1>Новини</h1>
        <div class="search-container">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" onclick="toggleSearch()">
                <circle cx="10" cy="10" r="6" stroke="black" stroke-width="2" />
                <line x1="16" y1="16" x2="22" y2="22" stroke="black" stroke-width="2" />
            </svg>
        </div>
    </header>

    <!-- Панель пошуку -->
    <div class="search-panel" id="searchPanel">
        <button class="close-search" onclick="closeSearch()">×</button>
        <input type="text" placeholder="Пошук новин...">
    </div>

    <nav class="menu" id="navbar">
        <a href="index.html">Головна</a>
        <a href="news.html">Новини</a>
        <a href="businesses.html">Бізнеси</a>
        <a href="culture.html">Культура</a>
        <a href="activities.html">Активності</a>
        <a href="contacts.html">Контакти</a>
    </nav>

    <div class="container">
        <div class="filter-container">
            <select id="categoryFilter" onchange="filterNews()">
                <option value="all">Усі новини</option>
                <option value="events">Події</option>
                <option value="culture">Культура</option>
                <option value="sports">Спорт</option>
            </select>
        </div>
        <div class="main-content" id="newsContainer">
            <!-- Динамічні новини будуть додані через JS -->
        </div>
    </div>

    <footer>
        &copy; 2024 Українці в Валенсії. Всі права захищені.
    </footer>

    <!-- Модальне вікно -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <button class="arrow arrow-left" onclick="prevNews()">&larr;</button>
            <button class="arrow arrow-right" onclick="nextNews()">&rarr;</button>
            <div class="modal-header">
                <h2 id="modalTitle">Заголовок новини</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <img id="modalImage" src="" alt="Зображення новини" style="width:100%;border-radius:8px;margin-bottom:15px;">
                <p id="modalContent">Тут буде більше інформації про новину.</p>
                <p><strong>Дата:</strong> <span id="modalDate"></span></p>
                <p><strong>Місце:</strong> <span id="modalPlace"></span></p>
            </div>
        </div>
    </div>

    <script>
        const newsContainer = document.getElementById('newsContainer');
        let currentNewsIndex = 0;

        // Дані з адмін-панелі, отримані з LocalStorage або за замовчуванням
        let newsData = JSON.parse(localStorage.getItem('newsData')) || [
            {
                title: "Хода до Дня Незалежності",
                content: "Це подія до Дня Незалежності України. Всі бажаючі можуть приєднатися. Деталі тут: https://example.com.",
                date: "2024-12-24",
                place: "Пласа Де Торос",
                category: "events",
                image: "https://via.placeholder.com/150"
            },
            {
                title: "Фестиваль української культури",
                content: "Щорічний фестиваль української культури з виступами, їжею та музикою. Дізнайтесь більше на https://culture-festival.ua.",
                date: "2024-11-15",
                place: "Парке Турія",
                category: "culture",
                image: "https://via.placeholder.com/150"
            }
        ];

        // Функція для перетворення текстових URL на активні посилання
        function linkify(text) {
            const urlPattern = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
            return text.replace(urlPattern, '<a href="$1" target="_blank">$1</a>');
        }

        // Функція для відображення новин
        function displayNews() {
            newsContainer.innerHTML = '';
            // Сортуємо новини за датою, найближчі події зверху
            newsData.sort((a, b) => new Date(a.date) - new Date(b.date));
            newsData.forEach((news, index) => {
                const newsItem = document.createElement('div');
                newsItem.classList.add('news-card');
                newsItem.setAttribute('data-category', news.category);
                newsItem.setAttribute('data-date', news.date); // Додано атрибут дати
                newsItem.setAttribute('onclick', `openModal(${index})`);
                newsItem.innerHTML = `
                    <img src="${news.image}" alt="Зображення новини">
                    <div class="title-overlay">${news.title}</div>
                `;
                newsContainer.appendChild(newsItem);
            });
        }

        // Функція для відображення новини за індексом
        function displayNewsByIndex(index) {
            const news = newsData[index];
            document.getElementById('modalTitle').innerText = news.title;
            document.getElementById('modalContent').innerHTML = linkify(news.content); // Застосовуємо linkify до тексту новини
            document.getElementById('modalDate').innerText = news.date;
            document.getElementById('modalPlace').innerText = news.place;
            document.getElementById('modalImage').src = news.image;
        }

        // Функція для відкриття модального вікна з новиною
        function openModal(index) {
            currentNewsIndex = index;
            displayNewsByIndex(currentNewsIndex);

            const modal = document.getElementById("myModal");
            modal.classList.add('show');
            modal.classList.remove('hide');

            // Заборона прокрутки сторінки
            document.body.classList.add('modal-open');
        }

        // Функція для переходу до попередньої новини
        function prevNews() {
            if (currentNewsIndex > 0) {
                currentNewsIndex--;
                displayNewsByIndex(currentNewsIndex);
            }
        }

        // Функція для переходу до наступної новини
        function nextNews() {
            if (currentNewsIndex < newsData.length - 1) {
                currentNewsIndex++;
                displayNewsByIndex(currentNewsIndex);
            }
        }

        // Функція для закриття модального вікна
        function closeModal() {
            const modal = document.getElementById("myModal");
            modal.classList.add('hide');
            setTimeout(() => {
                modal.classList.remove('show');
                document.body.classList.remove('modal-open');
            }, 300);
        }

        // Закриття модального вікна при натисканні поза його межами
        window.onclick = function(event) {
            const modal = document.getElementById("myModal");
            if (event.target === modal) {
                closeModal();
            }
        }

        // Закриття модального вікна при натисканні клавіші Escape
        window.onkeydown = function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        }

        // Фільтрація новин за категоріями
        function filterNews() {
            const filterValue = document.getElementById('categoryFilter').value;
            const newsItems = document.querySelectorAll('.news-card');

            newsItems.forEach(item => {
                if (filterValue === 'all' || item.getAttribute('data-category') === filterValue) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        displayNews();

        // Функція для перемикання меню
        function toggleMenu() {
            const navbar = document.getElementById('navbar');
            if (navbar.style.display === "flex") {
                navbar.style.display = "none";
            } else {
                navbar.style.display = "flex";
                navbar.style.flexDirection = "column";
                navbar.style.position = "fixed";
                navbar.style.width = "100%";
                navbar.style.height = "calc(100% - 60px)";
                navbar.style.top = "60px";
                navbar.style.zIndex = "10";
                navbar.style.overflowY = "auto";
            }
        }

        // Функція для відкриття панелі пошуку
        function toggleSearch() {
            const searchPanel = document.getElementById('searchPanel');
            searchPanel.classList.add('show');
        }

        // Функція для закриття панелі пошуку
        function closeSearch() {
            const searchPanel = document.getElementById('searchPanel');
            searchPanel.classList.remove('show');
        }
    </script>
</body>
</html>
